"use strict";exports.id=738,exports.ids=[738],exports.modules={2050:(e,t,r)=>{r.d(t,{ZP:()=>d});var n=r(6113),s=null;function genSaltSync(e,t){if("number"!=typeof(e=e||c))throw Error("Illegal arguments: "+typeof e+", "+typeof t);e<4?e=4:e>31&&(e=31);var r=[];return r.push("$2b$"),e<10&&r.push("0"),r.push(e.toString()),r.push("$"),r.push(base64_encode(function(e){try{return crypto.getRandomValues(new Uint8Array(e))}catch{}try{return n.randomBytes(e)}catch{}if(!s)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return s(e)}(l),l)),r.join("")}function genSalt(e,t,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof e&&(r=e,e=void 0),void 0===e)e=c;else if("number"!=typeof e)throw Error("illegal arguments: "+typeof e);function _async(t){a(function(){try{t(null,genSaltSync(e))}catch(e){t(e)}})}if(!r)return new Promise(function(e,t){_async(function(r,n){if(r){t(r);return}e(n)})});if("function"!=typeof r)throw Error("Illegal callback: "+typeof r);_async(r)}function hashSync(e,t){if(void 0===t&&(t=c),"number"==typeof t&&(t=genSaltSync(t)),"string"!=typeof e||"string"!=typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return _hash(e,t)}function hash(e,t,r,n){function _async(r){"string"==typeof e&&"number"==typeof t?genSalt(t,function(t,s){_hash(e,s,r,n)}):"string"==typeof e&&"string"==typeof t?_hash(e,t,r,n):a(r.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!r)return new Promise(function(e,t){_async(function(r,n){if(r){t(r);return}e(n)})});if("function"!=typeof r)throw Error("Illegal callback: "+typeof r);_async(r)}function safeStringCompare(e,t){for(var r=e.length^t.length,n=0;n<e.length;++n)r|=e.charCodeAt(n)^t.charCodeAt(n);return 0===r}var a="undefined"!=typeof process&&process&&"function"==typeof process.nextTick?"function"==typeof setImmediate?setImmediate:process.nextTick:setTimeout;function utf8Length(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:(64512&r)==55296&&(64512&e.charCodeAt(n+1))==56320?(++n,t+=4):t+=3;return t}var o="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),i=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function base64_encode(e,t){var r,n,s=0,a=[];if(t<=0||t>e.length)throw Error("Illegal len: "+t);for(;s<t;){if(r=255&e[s++],a.push(o[r>>2&63]),r=(3&r)<<4,s>=t||(r|=(n=255&e[s++])>>4&15,a.push(o[63&r]),r=(15&n)<<2,s>=t)){a.push(o[63&r]);break}r|=(n=255&e[s++])>>6&3,a.push(o[63&r]),a.push(o[63&n])}return a.join("")}function base64_decode(e,t){var r,n,s,a,o,l=0,c=e.length,u=0,f=[];if(t<=0)throw Error("Illegal len: "+t);for(;l<c-1&&u<t&&(r=(o=e.charCodeAt(l++))<i.length?i[o]:-1,n=(o=e.charCodeAt(l++))<i.length?i[o]:-1,-1!=r&&-1!=n)&&(a=r<<2>>>0|(48&n)>>4,f.push(String.fromCharCode(a)),!(++u>=t||l>=c||-1==(s=(o=e.charCodeAt(l++))<i.length?i[o]:-1)||(a=(15&n)<<4>>>0|(60&s)>>2,f.push(String.fromCharCode(a)),++u>=t||l>=c)));)a=(3&s)<<6>>>0|((o=e.charCodeAt(l++))<i.length?i[o]:-1),f.push(String.fromCharCode(a)),++u;var p=[];for(l=0;l<u;l++)p.push(f[l].charCodeAt(0));return p}var l=16,c=10,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],f=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],p=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function _encipher(e,t,r,n){var s=e[t],a=e[t+1];return s^=r[0],a^=(n[s>>>24]+n[256|s>>16&255]^n[512|s>>8&255])+n[768|255&s]^r[1],s^=(n[a>>>24]+n[256|a>>16&255]^n[512|a>>8&255])+n[768|255&a]^r[2],a^=(n[s>>>24]+n[256|s>>16&255]^n[512|s>>8&255])+n[768|255&s]^r[3],s^=(n[a>>>24]+n[256|a>>16&255]^n[512|a>>8&255])+n[768|255&a]^r[4],a^=(n[s>>>24]+n[256|s>>16&255]^n[512|s>>8&255])+n[768|255&s]^r[5],s^=(n[a>>>24]+n[256|a>>16&255]^n[512|a>>8&255])+n[768|255&a]^r[6],a^=(n[s>>>24]+n[256|s>>16&255]^n[512|s>>8&255])+n[768|255&s]^r[7],s^=(n[a>>>24]+n[256|a>>16&255]^n[512|a>>8&255])+n[768|255&a]^r[8],a^=(n[s>>>24]+n[256|s>>16&255]^n[512|s>>8&255])+n[768|255&s]^r[9],s^=(n[a>>>24]+n[256|a>>16&255]^n[512|a>>8&255])+n[768|255&a]^r[10],a^=(n[s>>>24]+n[256|s>>16&255]^n[512|s>>8&255])+n[768|255&s]^r[11],s^=(n[a>>>24]+n[256|a>>16&255]^n[512|a>>8&255])+n[768|255&a]^r[12],a^=(n[s>>>24]+n[256|s>>16&255]^n[512|s>>8&255])+n[768|255&s]^r[13],s^=(n[a>>>24]+n[256|a>>16&255]^n[512|a>>8&255])+n[768|255&a]^r[14],a^=(n[s>>>24]+n[256|s>>16&255]^n[512|s>>8&255])+n[768|255&s]^r[15],s^=(n[a>>>24]+n[256|a>>16&255]^n[512|a>>8&255])+n[768|255&a]^r[16],e[t]=a^r[17],e[t+1]=s,e}function _streamtoword(e,t){for(var r=0,n=0;r<4;++r)n=n<<8|255&e[t],t=(t+1)%e.length;return{key:n,offp:t}}function _key(e,t,r){for(var n,s=0,a=[0,0],o=t.length,i=r.length,l=0;l<o;l++)s=(n=_streamtoword(e,s)).offp,t[l]=t[l]^n.key;for(l=0;l<o;l+=2)a=_encipher(a,0,t,r),t[l]=a[0],t[l+1]=a[1];for(l=0;l<i;l+=2)a=_encipher(a,0,t,r),r[l]=a[0],r[l+1]=a[1]}function _crypt(e,t,r,n,s){var o,i,c=p.slice(),d=c.length;if(r<4||r>31){if(i=Error("Illegal number of rounds (4-31): "+r),n){a(n.bind(this,i));return}throw i}if(t.length!==l){if(i=Error("Illegal salt length: "+t.length+" != "+l),n){a(n.bind(this,i));return}throw i}r=1<<r>>>0;var m,h,g,y=0;function next(){if(s&&s(y/r),y<r)for(var o=Date.now();y<r&&(y+=1,_key(e,m,h),_key(t,m,h),!(Date.now()-o>100)););else{for(y=0;y<64;y++)for(g=0;g<d>>1;g++)_encipher(c,g<<1,m,h);var i=[];for(y=0;y<d;y++)i.push((c[y]>>24&255)>>>0),i.push((c[y]>>16&255)>>>0),i.push((c[y]>>8&255)>>>0),i.push((255&c[y])>>>0);return n?void n(null,i):i}n&&a(next)}if("function"==typeof Int32Array?(m=new Int32Array(u),h=new Int32Array(f)):(m=u.slice(),h=f.slice()),function(e,t,r,n){for(var s,a=0,o=[0,0],i=r.length,l=n.length,c=0;c<i;c++)a=(s=_streamtoword(t,a)).offp,r[c]=r[c]^s.key;for(c=0,a=0;c<i;c+=2)a=(s=_streamtoword(e,a)).offp,o[0]^=s.key,a=(s=_streamtoword(e,a)).offp,o[1]^=s.key,o=_encipher(o,0,r,n),r[c]=o[0],r[c+1]=o[1];for(c=0;c<l;c+=2)a=(s=_streamtoword(e,a)).offp,o[0]^=s.key,a=(s=_streamtoword(e,a)).offp,o[1]^=s.key,o=_encipher(o,0,r,n),n[c]=o[0],n[c+1]=o[1]}(t,e,m,h),void 0!==n)next();else for(;;)if(void 0!==(o=next()))return o||[]}function _hash(e,t,r,n){if("string"!=typeof e||"string"!=typeof t){if(s=Error("Invalid string / salt: Not a string"),r){a(r.bind(this,s));return}throw s}if("$"!==t.charAt(0)||"2"!==t.charAt(1)){if(s=Error("Invalid salt version: "+t.substring(0,2)),r){a(r.bind(this,s));return}throw s}if("$"===t.charAt(2))o="\x00",i=3;else{if("a"!==(o=t.charAt(2))&&"b"!==o&&"y"!==o||"$"!==t.charAt(3)){if(s=Error("Invalid salt revision: "+t.substring(2,4)),r){a(r.bind(this,s));return}throw s}i=4}if(t.charAt(i+2)>"$"){if(s=Error("Missing salt rounds"),r){a(r.bind(this,s));return}throw s}var s,o,i,c=10*parseInt(t.substring(i,i+1),10)+parseInt(t.substring(i+1,i+2),10),u=t.substring(i+3,i+25),f=function(e){for(var t,r,n=0,s=Array(utf8Length(e)),a=0,o=e.length;a<o;++a)(t=e.charCodeAt(a))<128?s[n++]=t:(t<2048?s[n++]=t>>6|192:((64512&t)==55296&&(64512&(r=e.charCodeAt(a+1)))==56320?(t=65536+((1023&t)<<10)+(1023&r),++a,s[n++]=t>>18|240,s[n++]=t>>12&63|128):s[n++]=t>>12|224,s[n++]=t>>6&63|128),s[n++]=63&t|128);return s}(e+=o>="a"?"\x00":""),d=base64_decode(u,l);function finish(e){var t=[];return t.push("$2"),o>="a"&&t.push(o),t.push("$"),c<10&&t.push("0"),t.push(c.toString()),t.push("$"),t.push(base64_encode(d,d.length)),t.push(base64_encode(e,4*p.length-1)),t.join("")}if(void 0===r)return finish(_crypt(f,d,c));_crypt(f,d,c,function(e,t){e?r(e,null):r(null,finish(t))},n)}let d={setRandomFallback:function(e){s=e},genSaltSync,genSalt,hashSync,hash,compareSync:function(e,t){if("string"!=typeof e||"string"!=typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return 60===t.length&&safeStringCompare(hashSync(e,t.substring(0,t.length-31)),t)},compare:function(e,t,r,n){function _async(r){if("string"!=typeof e||"string"!=typeof t){a(r.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)));return}if(60!==t.length){a(r.bind(this,null,!1));return}hash(e,t.substring(0,29),function(e,n){e?r(e):r(null,safeStringCompare(n,t))},n)}if(!r)return new Promise(function(e,t){_async(function(r,n){if(r){t(r);return}e(n)})});if("function"!=typeof r)throw Error("Illegal callback: "+typeof r);_async(r)},getRounds:function(e){if("string"!=typeof e)throw Error("Illegal arguments: "+typeof e);return parseInt(e.split("$")[2],10)},getSalt:function(e){if("string"!=typeof e)throw Error("Illegal arguments: "+typeof e);if(60!==e.length)throw Error("Illegal hash length: "+e.length+" != 60");return e.substring(0,29)},truncates:function(e){if("string"!=typeof e)throw Error("Illegal arguments: "+typeof e);return utf8Length(e)>72},encodeBase64:function(e,t){return base64_encode(e,t)},decodeBase64:function(e,t){return base64_decode(e,t)}}},4776:(e,t,r)=>{r.d(t,{Z:()=>R});var n=r(2037),s=r(7147);let a=new Map,o=new Map,i=Symbol("OriginError"),l={};let Query=class Query extends Promise{constructor(e,t,r,n,s={}){let o,l;super((e,t)=>{o=e,l=t}),this.tagged=Array.isArray(e.raw),this.strings=e,this.args=t,this.handler=r,this.canceller=n,this.options=s,this.state=null,this.statement=null,this.resolve=e=>(this.active=!1,o(e)),this.reject=e=>(this.active=!1,l(e)),this.active=!1,this.cancelled=null,this.executed=!1,this.signature="",this[i]=this.handler.debug?Error():this.tagged&&function(e){if(a.has(e))return a.get(e);let t=Error.stackTraceLimit;return Error.stackTraceLimit=4,a.set(e,Error()),Error.stackTraceLimit=t,a.get(e)}(this.strings)}get origin(){return(this.handler.debug?this[i].stack:this.tagged&&o.has(this.strings)?o.get(this.strings):o.set(this.strings,this[i].stack).get(this.strings))||""}static get[Symbol.species](){return Promise}cancel(){return this.canceller&&(this.canceller(this),this.canceller=null)}simple(){return this.options.simple=!0,this.options.prepare=!1,this}async readable(){return this.simple(),this.streaming=!0,this}async writable(){return this.simple(),this.streaming=!0,this}cursor(e=1,t){let r;return(this.options.simple=!1,"function"==typeof e&&(t=e,e=1),this.cursorRows=e,"function"==typeof t)?(this.cursorFn=t,this):{[Symbol.asyncIterator]:()=>({next:()=>{if(this.executed&&!this.active)return{done:!0};r&&r();let e=new Promise((e,t)=>{this.cursorFn=t=>(e({value:t,done:!1}),new Promise(e=>r=e)),this.resolve=()=>(this.active=!1,e({done:!0})),this.reject=e=>(this.active=!1,t(e))});return this.execute(),e},return:()=>(r&&r(l),{done:!0})})}}describe(){return this.options.simple=!1,this.onlyDescribe=this.options.prepare=!0,this}stream(){throw Error(".stream has been renamed to .forEach")}forEach(e){return this.forEachFn=e,this.handle(),this}raw(){return this.isRaw=!0,this}values(){return this.isRaw="values",this}async handle(){!this.executed&&(this.executed=!0)&&await 1&&this.handler(this)}execute(){return this.handle(),this}then(){return this.handle(),super.then.apply(this,arguments)}catch(){return this.handle(),super.catch.apply(this,arguments)}finally(){return this.handle(),super.finally.apply(this,arguments)}};let PostgresError=class PostgresError extends Error{constructor(e){super(e.message),this.name=this.constructor.name,Object.assign(this,e)}};let c={connection:function connection(e,t,r){let{host:n,port:s}=r||t,a=Object.assign(Error("write "+e+" "+(t.path||n+":"+s)),{code:e,errno:e,address:t.path||n},t.path?{}:{port:s});return Error.captureStackTrace(a,connection),a},postgres:function postgres(e){let t=new PostgresError(e);return Error.captureStackTrace(t,postgres),t},generic:function generic(e,t){let r=Object.assign(Error(e+": "+t),{code:e});return Error.captureStackTrace(r,generic),r},notSupported:function notSupported(e){let t=Object.assign(Error(e+" (B) is not supported"),{code:"MESSAGE_NOT_SUPPORTED",name:e});return Error.captureStackTrace(t,notSupported),t}};let NotTagged=class NotTagged{then(){notTagged()}catch(){notTagged()}finally(){notTagged()}};let Identifier=class Identifier extends NotTagged{constructor(e){super(),this.value=escapeIdentifier(e)}};let Parameter=class Parameter extends NotTagged{constructor(e,t,r){super(),this.value=e,this.type=t,this.array=r}};let Builder=class Builder extends NotTagged{constructor(e,t){super(),this.first=e,this.rest=t}build(e,t,r,n){let s=f.map(([t,r])=>({fn:r,i:e.search(t)})).sort((e,t)=>e.i-t.i).pop();return -1===s.i?escapeIdentifiers(this.first,n):s.fn(this.first,this.rest,t,r,n)}};function handleValue(e,t,r,n){let s=e instanceof Parameter?e.value:e;if(void 0===s&&(e instanceof Parameter?e.value=n.transform.undefined:s=e=n.transform.undefined,void 0===s))throw c.generic("UNDEFINED_VALUE","Undefined values are not allowed");return"$"+r.push(e instanceof Parameter?(t.push(e.value),e.array?e.array[e.type||inferType(e.value)]||e.type||function firstIsString(e){return Array.isArray(e)?firstIsString(e[0]):"string"==typeof e?1009:0}(e.value):e.type):(t.push(e),inferType(e)))}let u=typeHandlers({string:{to:25,from:null,serialize:e=>""+e},number:{to:0,from:[21,23,26,700,701],serialize:e=>""+e,parse:e=>+e},json:{to:114,from:[114,3802],serialize:e=>JSON.stringify(e),parse:e=>JSON.parse(e)},boolean:{to:16,from:16,serialize:e=>!0===e?"t":"f",parse:e=>"t"===e},date:{to:1184,from:[1082,1114,1184],serialize:e=>(e instanceof Date?e:new Date(e)).toISOString(),parse:e=>new Date(e)},bytea:{to:17,from:17,serialize:e=>"\\x"+Buffer.from(e).toString("hex"),parse:e=>Buffer.from(e.slice(2),"hex")}});function stringify(e,t,r,n,s,a){for(let o=1;o<e.strings.length;o++)t+=stringifyValue(t,r,n,s,a)+e.strings[o],r=e.args[o];return t}function stringifyValue(e,t,r,n,s){return t instanceof Builder?t.build(e,r,n,s):t instanceof Query?fragment(t,r,n,s):t instanceof Identifier?t.value:t&&t[0]instanceof Query?t.reduce((e,t)=>e+" "+fragment(t,r,n,s),""):handleValue(t,r,n,s)}function fragment(e,t,r,n){return e.fragment=!0,stringify(e,e.strings[0],e.args[0],t,r,n)}function valuesBuilder(e,t,r,n,s){return e.map(e=>"("+n.map(n=>stringifyValue("values",e[n],t,r,s)).join(",")+")").join(",")}function values(e,t,r,n,s){let a=Array.isArray(e[0]),o=t.length?t.flat():Object.keys(a?e[0]:e);return valuesBuilder(a?e:[e],r,n,o,s)}function types_select(e,t,r,n,s){let a;if("string"==typeof e&&(e=[e].concat(t)),Array.isArray(e))return escapeIdentifiers(e,s);let o=t.length?t.flat():Object.keys(e);return o.map(t=>((a=e[t])instanceof Query?fragment(a,r,n,s):a instanceof Identifier?a.value:handleValue(a,r,n,s))+" as "+escapeIdentifier(s.transform.column.to?s.transform.column.to(t):t)).join(",")}let f=Object.entries({values,in:(...e)=>{let t=values(...e);return"()"===t?"(null)":t},select:types_select,as:types_select,returning:types_select,"\\(":types_select,update:(e,t,r,n,s)=>(t.length?t.flat():Object.keys(e)).map(t=>escapeIdentifier(s.transform.column.to?s.transform.column.to(t):t)+"="+stringifyValue("values",e[t],r,n,s)),insert(e,t,r,n,s){let a=t.length?t.flat():Object.keys(Array.isArray(e)?e[0]:e);return"("+escapeIdentifiers(a,s)+")values"+valuesBuilder(Array.isArray(e)?e:[e],r,n,a,s)}}).map(([e,t])=>[RegExp("((?:^|[\\s(])"+e+"(?:$|[\\s(]))(?![\\s\\S]*\\1)","i"),t]);function notTagged(){throw c.generic("NOT_TAGGED_CALL","Query not called as a tagged template literal")}let p=u.serializers,d=u.parsers,mergeUserTypes=function(e){let t=typeHandlers(e||{});return{serializers:Object.assign({},p,t.serializers),parsers:Object.assign({},d,t.parsers)}};function typeHandlers(e){return Object.keys(e).reduce((t,r)=>(e[r].from&&[].concat(e[r].from).forEach(n=>t.parsers[n]=e[r].parse),e[r].serialize&&(t.serializers[e[r].to]=e[r].serialize,e[r].from&&[].concat(e[r].from).forEach(n=>t.serializers[n]=e[r].serialize)),t),{parsers:{},serializers:{}})}function escapeIdentifiers(e,{transform:{column:t}}){return e.map(e=>escapeIdentifier(t.to?t.to(e):e)).join(",")}let escapeIdentifier=function(e){return'"'+e.replace(/"/g,'""').replace(/\./g,'"."')+'"'},inferType=function inferType(e){return e instanceof Parameter?e.type:e instanceof Date?1184:e instanceof Uint8Array?17:!0===e||!1===e?16:"bigint"==typeof e?20:Array.isArray(e)?inferType(e[0]):0},m=/\\/g,h=/"/g,arraySerializer=function arraySerializer(e,t,r,n){if(!1===Array.isArray(e))return e;if(!e.length)return"{}";let s=e[0],a=1020===n?";":",";return Array.isArray(s)&&!s.type?"{"+e.map(e=>arraySerializer(e,t,r,n)).join(a)+"}":"{"+e.map(e=>{if(void 0===e&&void 0===(e=r.transform.undefined))throw c.generic("UNDEFINED_VALUE","Undefined values are not allowed");return null===e?"null":'"'+(t?t(e.type?e.value:e):""+e).replace(m,"\\\\").replace(h,'\\"')+'"'}).join(a)+"}"},g={i:0,char:null,str:"",quoted:!1,last:0},toCamel=e=>{let t=e[0];for(let r=1;r<e.length;r++)t+="_"===e[r]?e[++r].toUpperCase():e[r];return t},toPascal=e=>{let t=e[0].toUpperCase();for(let r=1;r<e.length;r++)t+="_"===e[r]?e[++r].toUpperCase():e[r];return t},toKebab=e=>e.replace(/_/g,"-"),fromCamel=e=>e.replace(/([A-Z])/g,"_$1").toLowerCase(),fromPascal=e=>(e.slice(0,1)+e.slice(1).replace(/([A-Z])/g,"_$1")).toLowerCase(),fromKebab=e=>e.replace(/-/g,"_");function createJsonTransform(e){return function jsonTransform(t,r){return"object"==typeof t&&null!==t&&(114===r.type||3802===r.type)?Array.isArray(t)?t.map(e=>jsonTransform(e,r)):Object.entries(t).reduce((t,[n,s])=>Object.assign(t,{[e(n)]:jsonTransform(s,r)}),{}):t}}toCamel.column={from:toCamel},toCamel.value={from:createJsonTransform(toCamel)},fromCamel.column={to:fromCamel};let y={...toCamel};y.column.to=fromCamel,toPascal.column={from:toPascal},toPascal.value={from:createJsonTransform(toPascal)},fromPascal.column={to:fromPascal};let b={...toPascal};b.column.to=fromPascal,toKebab.column={from:toKebab},toKebab.value={from:createJsonTransform(toKebab)},fromKebab.column={to:fromKebab};let w={...toKebab};w.column.to=fromKebab;var v=r(1808),_=r(4404),E=r(6113),S=r(2781),A=r(4074);let Result=class Result extends Array{constructor(){super(),Object.defineProperties(this,{count:{value:null,writable:!0},state:{value:null,writable:!0},command:{value:null,writable:!0},columns:{value:null,writable:!0},statement:{value:null,writable:!0}})}static get[Symbol.species](){return Array}};let src_queue=function(e=[]){let t=e.slice(),r=0;return{get length(){return t.length-r},remove:e=>{let r=t.indexOf(e);return -1===r?null:(t.splice(r,1),e)},push:e=>(t.push(e),e),shift:()=>{let e=t[r++];return r===t.length?(r=0,t=[]):t[r-1]=void 0,e}}},P=Buffer.allocUnsafe(256),I="BCcDdEFfHPpQSX".split("").reduce((e,t)=>{let r=t.charCodeAt(0);return e[t]=()=>(P[0]=r,C.i=5,C),e},{}),C=Object.assign(function(){return C.i=0,C},I,{N:"\x00",i:0,inc:e=>(C.i+=e,C),str(e){let t=Buffer.byteLength(e);return fit(t),C.i+=P.write(e,C.i,t,"utf8"),C},i16:e=>(fit(2),P.writeUInt16BE(e,C.i),C.i+=2,C),i32:(e,t)=>(t||0===t?P.writeUInt32BE(e,t):(fit(4),P.writeUInt32BE(e,C.i),C.i+=4),C),z:e=>(fit(e),P.fill(0,C.i,C.i+e),C.i+=e,C),raw:e=>(P=Buffer.concat([P.subarray(0,C.i),e]),C.i=P.length,C),end(e=1){P.writeUInt32BE(C.i-e,e);let t=P.subarray(0,C.i);return C.i=0,P=Buffer.allocUnsafe(256),t}});function fit(e){if(P.length-C.i<e){let t=P,r=t.length;P=Buffer.allocUnsafe(r+(r>>1)+e),t.copy(P)}}let src_connection=function Connection(e,t={},{onopen:r=noop,onend:n=noop,onclose:s=noop}={}){let{ssl:a,max:o,user:i,host:u,port:f,database:p,parsers:d,transform:m,onnotice:h,onnotify:y,onparameter:b,max_pipeline:w,keep_alive:P,backoff:I,target_session_attrs:j}=e,R=src_queue(),q=T++,D={pid:null,secret:null},$=timer(end,e.idle_timeout),L=timer(end,e.max_lifetime),z=timer(function(){errored(c.connection("CONNECT_TIMEOUT",e,M)),M.destroy()},e.connect_timeout),M=null,F,G=new Result,K=Buffer.alloc(0),Q=e.fetch_types,H={},V={},W=Math.random().toString(36).slice(2),J=1,X=0,Y=0,Z=0,ee=0,et=0,er=0,en=0,es=null,ea=null,eo=!1,ei=null,el=null,ec=null,eu=null,ef=null,ep=null,ed=null,em=null,eh=null,eg=null,ey={queue:t.closed,idleTimer:$,connect(e){ec=e||!0,reconnect()},terminate,execute,cancel,end,count:0,id:q};return t.closed&&t.closed.push(ey),ey;async function createSocket(){let t;try{t=e.socket?await Promise.resolve(e.socket(e)):new v.Socket}catch(e){error(e);return}return t.on("error",error),t.on("close",closed),t.on("drain",drain),t}async function cancel({pid:e,secret:t},r,n){try{F=C().i32(16).i32(80877102).i32(e).i32(t).end(16),await connect(),M.once("error",n),M.once("close",r)}catch(e){n(e)}}function execute(t){if(eo)return queryError(t,c.connection("CONNECTION_DESTROYED",e));if(!t.cancelled)try{return t.state=D,eh?R.push(t):(eh=t).active=!0,function(t){let r=[],n=[],s=stringify(t,t.strings[0],t.args[0],r,n,e);t.tagged||t.args.forEach(t=>handleValue(t,r,n,e)),t.prepare=e.prepare&&(!("prepare"in t.options)||t.options.prepare),t.string=s,t.signature=t.prepare&&n+s,t.onlyDescribe&&delete V[t.signature],t.parameters=t.parameters||r,t.prepared=t.prepare&&t.signature in V,t.describeFirst=t.onlyDescribe||r.length&&!t.prepared,t.statement=t.prepared?V[t.signature]:{string:s,types:n,name:t.prepare?W+J++:""},"function"==typeof e.debug&&e.debug(q,s,r,n)}(t),write(function(e){if(e.parameters.length>=65534)throw c.generic("MAX_PARAMETERS_EXCEEDED","Max number of parameters (65534) exceeded");return e.options.simple?C().Q().str(e.statement.string+C.N).end():e.describeFirst?Buffer.concat([describe(e),O]):e.prepare?e.prepared?prepared(e):Buffer.concat([describe(e),prepared(e)]):Buffer.concat([Parse(e.statement.string,e.parameters,e.statement.types),N,prepared(e)])}(t))&&!t.describeFirst&&!t.cursorFn&&R.length<w&&(!t.options.onexecute||t.options.onexecute(ey))}catch(e){return 0===R.length&&write(x),errored(e),!0}}function describe(e){return Buffer.concat([Parse(e.statement.string,e.parameters,e.statement.types,e.statement.name),function(e,t=""){return C().D().str("S").str(t+C.N).end()}(0,e.statement.name)])}function prepared(t){return Buffer.concat([function(t,r,n="",s=""){let a,o;return C().B().str(s+C.N).str(n+C.N).i16(0).i16(t.length),t.forEach((n,s)=>{if(null===n)return C.i32(4294967295);o=r[s],t[s]=n=o in e.serializers?e.serializers[o](n):""+n,a=C.i,C.inc(4).str(n).i32(C.i-a-4,a)}),C.i16(0),C.end()}(t.parameters,t.statement.types,t.statement.name,t.cursorName),t.cursorFn?Execute("",t.cursorRows):k])}function write(e,t){return(ep=ep?Buffer.concat([ep,e]):Buffer.from(e),t||ep.length>=1024)?nextWrite(t):(null===ea&&(ea=setImmediate(nextWrite)),!0)}function nextWrite(e){let t=M.write(ep,e);return null!==ea&&clearImmediate(ea),ep=ea=null,t}async function secure(){write(B);let e=await new Promise(e=>M.once("data",t=>e(83===t[0])));if(!e&&"prefer"===a)return connected();M.removeAllListeners(),(M=_.connect({socket:M,servername:v.isIP(M.host)?void 0:M.host,..."require"===a||"allow"===a||"prefer"===a?{rejectUnauthorized:!1}:"verify-full"===a?{}:"object"==typeof a?a:{}})).on("secureConnect",connected),M.on("error",error),M.on("close",closed),M.on("drain",drain)}function drain(){eh||r(ey)}function data(t){if(!ei||(ei.push(t),!((Y-=t.length)>=0)))for(K=ei?Buffer.concat(ei,et-Y):0===K.length?t:Buffer.concat([K,t],K.length+t.length);K.length>4;){if((et=K.readUInt32BE(1))>=K.length){Y=et-K.length,ei=[K];break}try{(function(t,n=t[0]){(68===n?function(e){let t,r,n,s=7,a=eh.isRaw?Array(eh.statement.columns.length):{};for(let o=0;o<eh.statement.columns.length;o++)r=eh.statement.columns[o],t=e.readInt32BE(s),s+=4,n=-1===t?null:!0===eh.isRaw?e.subarray(s,s+=t):void 0===r.parser?e.toString("utf8",s,s+=t):!0===r.parser.array?r.parser(e.toString("utf8",s+1,s+=t)):r.parser(e.toString("utf8",s,s+=t)),eh.isRaw?a[o]=!0===eh.isRaw?n:m.value.from?m.value.from(n,r):n:a[r.name]=m.value.from?m.value.from(n,r):n;eh.forEachFn?eh.forEachFn(m.row.from?m.row.from(a):a,G):G[en++]=m.row.from?m.row.from(a):a}:100===n?function(e){ef&&(ef.push(e.subarray(5))||M.pause())}:65===n?function(e){if(!y)return;let t=9;for(;0!==e[t++];);y(e.toString("utf8",9,t-1),e.toString("utf8",t,e.length-1))}:83===n?function(t){let[r,n]=t.toString("utf8",5,t.length-1).split(C.N);H[r]=n,e.parameters[r]!==n&&(e.parameters[r]=n,b&&b(r,n))}:90===n?function(t){if(eh&&eh.options.simple&&eh.resolve(el||G),eh=el=null,G=new Result,z.cancel(),ec){if(j){var n;if(!H.in_hot_standby||!H.default_transaction_read_only)return function(){let e=new Query([`
      show transaction_read_only;
      select pg_catalog.pg_is_in_recovery()
    `],[],execute,null,{simple:!0});e.resolve=([[e],[t]])=>{H.default_transaction_read_only=e.transaction_read_only,H.in_hot_standby=t.pg_is_in_recovery?"on":"off"},e.execute()}();if(n=H,"read-write"===j&&"on"===n.default_transaction_read_only||"read-only"===j&&"off"===n.default_transaction_read_only||"primary"===j&&"on"===n.in_hot_standby||"standby"===j&&"off"===n.in_hot_standby||"prefer-standby"===j&&"off"===n.in_hot_standby&&e.host[ee])return terminate()}return Q?(!0===ec&&(ec=null),fetchArrayTypes()):(!0!==ec&&execute(ec),e.shared.retries=ee=0,void(ec=null))}for(;R.length&&(eh=R.shift())&&(eh.active=!0,eh.cancelled);)Connection(e).cancel(eh.state,eh.cancelled.resolve,eh.cancelled.reject);eh||(ey.reserved?ey.reserved.release||73!==t[5]?ey.reserved():eu?terminate():(ey.reserved=null,r(ey)):eu?terminate():r(ey))}:67===n?function(e){en=0;for(let t=e.length-1;t>0;t--)if(32===e[t]&&e[t+1]<58&&null===G.count&&(G.count=+e.toString("utf8",t+1,e.length-1)),e[t-1]>=65){G.command=e.toString("utf8",5,t),G.state=D;break}return(eg&&(eg(),eg=null),"BEGIN"!==G.command||1===o||ey.reserved)?eh.options.simple?BindComplete():void(eh.cursorFn&&(G.count&&eh.cursorFn(G),write(x)),eh.resolve(G)):errored(c.generic("UNSAFE_TRANSACTION","Only use sql.begin, sql.reserved or max: 1"))}:50===n?BindComplete:49===n?function(){eh.parsing=!1}:116===n?function(e){let t=e.readUInt16BE(5);for(let r=0;r<t;++r)eh.statement.types[r]||(eh.statement.types[r]=e.readUInt32BE(7+4*r));eh.prepare&&(V[eh.signature]=eh.statement),eh.describeFirst&&!eh.onlyDescribe&&(write(prepared(eh)),eh.describeFirst=!1)}:84===n?function(e){let t;G.command&&((el=el||[G]).push(G=new Result),G.count=null,eh.statement.columns=null);let r=e.readUInt16BE(5),n=7;eh.statement.columns=Array(r);for(let s=0;s<r;++s){for(t=n;0!==e[n++];);let r=e.readUInt32BE(n),a=e.readUInt16BE(n+4),o=e.readUInt32BE(n+6);eh.statement.columns[s]={name:m.column.from?m.column.from(e.toString("utf8",t,n-1)):e.toString("utf8",t,n-1),parser:d[o],table:r,number:a,type:o},n+=18}if(G.statement=eh.statement,eh.onlyDescribe)return eh.resolve(eh.statement),write(x)}:82===n?Authentication:110===n?function(){if(G.statement=eh.statement,G.statement.columns=[],eh.onlyDescribe)return eh.resolve(eh.statement),write(x)}:75===n?function(e){D.pid=e.readUInt32BE(5),D.secret=e.readUInt32BE(9)}:69===n?function(e){var t;eh&&(eh.cursorFn||eh.describeFirst)&&write(x);let r=c.postgres(parseError(e));eh&&eh.retried?errored(eh.retried):eh&&eh.prepared&&U.has(r.routine)?(t=eh,delete V[t.signature],t.retried=r,execute(t)):errored(r)}:115===n?PortalSuspended:51===n?function(){G.count&&eh.cursorFn(G),eh.resolve(G)}:71===n?function(){ef=new S.Writable({autoDestroy:!0,write(e,t,r){M.write(C().d().raw(e).end(),r)},destroy(e,t){t(e),M.write(C().f().str(e+C.N).end()),ef=null},final(e){M.write(C().c().end()),eg=e}}),eh.resolve(ef)}:78===n?function(e){h?h(parseError(e)):console.log(parseError(e))}:72===n?function(){ef=new S.Readable({read(){M.resume()}}),eh.resolve(ef)}:99===n?function(){ef&&ef.push(null),ef=null}:73===n?function(){}:86===n?function(){errored(c.notSupported("FunctionCallResponse"))}:118===n?function(){errored(c.notSupported("NegotiateProtocolVersion"))}:87===n?function(){ef=new S.Duplex({autoDestroy:!0,read(){M.resume()},write(e,t,r){M.write(C().d().raw(e).end(),r)},destroy(e,t){t(e),M.write(C().f().str(e+C.N).end()),ef=null},final(e){M.write(C().c().end()),eg=e}}),eh.resolve(ef)}:function(e){console.error("Postgres.js : Unknown Message:",e[0])})(t)})(K.subarray(0,et+1))}catch(e){eh&&(eh.cursorFn||eh.describeFirst)&&write(x),errored(e)}K=K.subarray(et+1),Y=0,ei=null}}async function connect(){if(eo=!1,H={},M||(M=await createSocket()),M){if(z.start(),e.socket)return a?secure():connected();if(M.on("connect",a?secure:connected),e.path)return M.connect(e.path);M.ssl=a,M.connect(f[Z],u[Z]),M.host=u[Z],M.port=f[Z],Z=(Z+1)%f.length}}function reconnect(){setTimeout(connect,X?X+er-A.performance.now():0)}function connected(){try{V={},Q=e.fetch_types,W=Math.random().toString(36).slice(2),J=1,L.start(),M.on("data",data),P&&M.setKeepAlive&&M.setKeepAlive(!0,1e3*P);let t=F||C().inc(4).i16(3).z(2).str(Object.entries(Object.assign({user:i,database:p,client_encoding:"UTF8"},e.connection)).filter(([,e])=>e).map(([e,t])=>e+C.N+t).join(C.N)).z(2).end(0);write(t)}catch(e){error(e)}}function error(r){if(ey.queue!==t.connecting||!e.host[ee+1])for(errored(r);R.length;)queryError(R.shift(),r)}function errored(e){ef&&(ef.destroy(e),ef=null),eh&&queryError(eh,e),ec&&(queryError(ec,e),ec=null)}function queryError(t,r){"query"in r||"parameters"in r||Object.defineProperties(r,{stack:{value:r.stack+t.origin.replace(/.*\n/,"\n"),enumerable:e.debug},query:{value:t.string,enumerable:e.debug},parameters:{value:t.parameters,enumerable:e.debug},args:{value:t.args,enumerable:e.debug},types:{value:t.statement&&t.statement.types,enumerable:e.debug}}),t.reject(r)}function end(){return eu||(ey.reserved||n(ey),ey.reserved||ec||eh||0!==R.length?eu=new Promise(e=>ed=e):(terminate(),new Promise(e=>M&&"closed"!==M.readyState?M.once("close",e):e())))}function terminate(){eo=!0,(ef||eh||ec||R.length)&&error(c.connection("CONNECTION_DESTROYED",e)),clearImmediate(ea),M&&(M.removeListener("data",data),M.removeListener("connect",connected),"open"===M.readyState&&M.end(C().X().end())),ed&&(ed(),eu=ed=null)}async function closed(t){if(K=Buffer.alloc(0),Y=0,ei=null,clearImmediate(ea),M.removeListener("data",data),M.removeListener("connect",connected),$.cancel(),L.cancel(),z.cancel(),M.removeAllListeners(),M=null,ec)return reconnect();!t&&(eh||R.length)&&error(c.connection("CONNECTION_CLOSED",e,M)),X=A.performance.now(),t&&e.shared.retries++,er=("function"==typeof I?I(e.shared.retries):I)*1e3,s(ey,c.connection("CONNECTION_CLOSED",e,M))}function BindComplete(){G.statement||(G.statement=eh.statement),G.columns=eh.statement.columns}async function Authentication(e,t=e.readUInt32BE(5)){(3===t?AuthenticationCleartextPassword:5===t?AuthenticationMD5Password:10===t?SASL:11===t?SASLContinue:12===t?function(e){e.toString("utf8",9).split(C.N,1)[0].slice(2)!==es&&(errored(c.generic("SASL_SIGNATURE_MISMATCH","The server did not return the correct signature")),M.destroy())}:0!==t?function(e,t){console.error("Postgres.js : Unknown Auth:",t)}:noop)(e,t)}async function AuthenticationCleartextPassword(){let e=await Pass();write(C().p().str(e).z(1).end())}async function AuthenticationMD5Password(e){let t="md5"+await md5(Buffer.concat([Buffer.from(await md5(await Pass()+i)),e.subarray(9)]));write(C().p().str(t).z(1).end())}async function SASL(){em=(await E.randomBytes(18)).toString("base64"),C().p().str("SCRAM-SHA-256"+C.N);let e=C.i;write(C.inc(4).str("n,,n=*,r="+em).i32(C.i-e-4,e).end())}async function SASLContinue(e){let t=e.toString("utf8",9).split(",").reduce((e,t)=>(e[t[0]]=t.slice(2),e),{}),r=await E.pbkdf2Sync(await Pass(),Buffer.from(t.s,"base64"),parseInt(t.i),32,"sha256"),n=await hmac(r,"Client Key"),s="n=*,r="+em+",r="+t.r+",s="+t.s+",i="+t.i+",c=biws,r="+t.r;es=(await hmac(await hmac(r,"Server Key"),s)).toString("base64");let a="c=biws,r="+t.r+",p="+(function(e,t){let r=Math.max(e.length,t.length),n=Buffer.allocUnsafe(r);for(let s=0;s<r;s++)n[s]=e[s]^t[s];return n})(n,Buffer.from(await hmac(await E.createHash("sha256").update(n).digest(),s))).toString("base64");write(C().p().str(a).end())}function Pass(){return Promise.resolve("function"==typeof e.pass?e.pass():e.pass)}async function fetchArrayTypes(){Q=!1;let t=await new Query([`
      select b.oid, b.typarray
      from pg_catalog.pg_type a
      left join pg_catalog.pg_type b on b.oid = a.typelem
      where a.typcategory = 'A'
      group by b.oid, b.typarray
      order by b.oid
    `],[],execute);t.forEach(({oid:t,typarray:r})=>(function(t,r){if(e.parsers[r]&&e.serializers[r])return;let n=e.parsers[t];e.shared.typeArrayMap[t]=r,e.parsers[r]=e=>(g.i=g.last=0,function arrayParserLoop(e,t,r,n){let s=[],a=1020===n?";":",";for(;e.i<t.length;e.i++){if(e.char=t[e.i],e.quoted)"\\"===e.char?e.str+=t[++e.i]:'"'===e.char?(s.push(r?r(e.str):e.str),e.str="",e.quoted='"'===t[e.i+1],e.last=e.i+2):e.str+=e.char;else if('"'===e.char)e.quoted=!0;else if("{"===e.char)e.last=++e.i,s.push(arrayParserLoop(e,t,r,n));else if("}"===e.char){e.quoted=!1,e.last<e.i&&s.push(r?r(t.slice(e.last,e.i)):t.slice(e.last,e.i)),e.last=e.i+1;break}else e.char===a&&"}"!==e.p&&'"'!==e.p&&(s.push(r?r(t.slice(e.last,e.i)):t.slice(e.last,e.i)),e.last=e.i+1);e.p=e.char}return e.last<e.i&&s.push(r?r(t.slice(e.last,e.i+1)):t.slice(e.last,e.i+1)),s}(g,e,n,r)),e.parsers[r].array=!0,e.serializers[r]=n=>arraySerializer(n,e.serializers[t],e,r)})(t,r))}async function PortalSuspended(){try{let e=await Promise.resolve(eh.cursorFn(G));en=0,e===l?write(function(e=""){return Buffer.concat([C().C().str("P").str(e+C.N).end(),C().S().end()])}(eh.portal)):(G=new Result,write(Execute("",eh.cursorRows)))}catch(e){write(x),eh.reject(e)}}function Parse(e,t,r,n=""){return C().P().str(n+C.N).str(e+C.N).i16(t.length),t.forEach((e,t)=>C.i32(r[t]||0)),C.end()}function Execute(e="",t=0){return Buffer.concat([C().E().str(e+C.N).i32(t).end(),O])}},T=1,x=C().S().end(),O=C().H().end(),B=C().i32(8).i32(80877103).end(8),k=Buffer.concat([C().E().str(C.N).i32(0).end(),x]),N=C().D().str("S").str(C.N).end(),noop=()=>{},U=new Set(["FetchPreparedStatement","RevalidateCachedQuery","transformAssignedExpr"]),j={83:"severity_local",86:"severity",67:"code",77:"message",68:"detail",72:"hint",80:"position",112:"internal_position",113:"internal_query",87:"where",115:"schema_name",116:"table_name",99:"column_name",100:"data type_name",110:"constraint_name",70:"file",76:"line",82:"routine"};function parseError(e){let t={},r=5;for(let n=5;n<e.length-1;n++)0===e[n]&&(t[j[e[r]]]=e.toString("utf8",r+1,n),r=n+1);return t}function md5(e){return E.createHash("md5").update(e).digest("hex")}function hmac(e,t){return E.createHmac("sha256",e).update(t).digest()}function timer(e,t){let r;if(!(t="function"==typeof t?t():t))return{cancel:noop,start:noop};return{cancel(){r&&(clearTimeout(r),r=null)},start(){r&&clearTimeout(r),r=setTimeout(done,1e3*t,arguments)}};function done(t){e.apply(null,t),r=null}}let subscribe_noop=()=>{};function tuples(e,t,r,n){let s,a,o;let i=n.raw?Array(t.length):{};for(let l=0;l<t.length;l++)s=e[r++],a=t[l],o=110===s?null:117===s?void 0:void 0===a.parser?e.toString("utf8",r+4,r+=4+e.readUInt32BE(r)):!0===a.parser.array?a.parser(e.toString("utf8",r+5,r+=4+e.readUInt32BE(r))):a.parser(e.toString("utf8",r+4,r+=4+e.readUInt32BE(r))),n.raw?i[l]=!0===n.raw?o:n.value.from?n.value.from(o,a):o:i[a.name]=n.value.from?n.value.from(o,a):o;return{i:r,row:n.row.from?n.row.from(i):i}}function largeObject(e,t,r=393216){return new Promise(async(n,s)=>{await e.begin(async e=>{let s;t||([{oid:t}]=await e`select lo_creat(-1) as oid`);let[{fd:a}]=await e`select lo_open(${t}, ${r}) as fd`,o={writable,readable,close:()=>e`select lo_close(${a})`.then(s),tell:()=>e`select lo_tell64(${a})`,read:t=>e`select loread(${a}, ${t}) as data`,write:t=>e`select lowrite(${a}, ${t})`,truncate:t=>e`select lo_truncate64(${a}, ${t})`,seek:(t,r=0)=>e`select lo_lseek64(${a}, ${t}, ${r})`,size:()=>e`
          select
            lo_lseek64(${a}, location, 0) as position,
            seek.size
          from (
            select
              lo_lseek64($1, 0, 2) as size,
              tell.location
            from (select lo_tell64($1) as location) tell
          ) seek
        `};return n(o),new Promise(async e=>s=e);async function readable({highWaterMark:e=16384,start:t=0,end:r=1/0}={}){let n=r-t;return t&&await o.seek(t),new S.Readable({highWaterMark:e,async read(e){let t=e>n?e-n:e;n-=e;let[{data:r}]=await o.read(t);this.push(r),r.length<e&&this.push(null)}})}async function writable({highWaterMark:e=16384,start:t=0}={}){return t&&await o.seek(t),new S.Writable({highWaterMark:e,write(e,t,r){o.write(e).then(()=>r(),r)}})}}).catch(s)})}Object.assign(Postgres,{PostgresError:PostgresError,toPascal:toPascal,pascal:b,toCamel:toCamel,camel:y,toKebab:toKebab,kebab:w,fromPascal:fromPascal,fromCamel:fromCamel,fromKebab:fromKebab,BigInt:{to:20,from:[20],parse:e=>BigInt(e),serialize:e=>e.toString()}});let R=Postgres;function Postgres(e,t){let r=function(e,t){var r;if(e&&e.shared)return e;let s=process.env,a=(e&&"string"!=typeof e?e:t)||{},{url:o,multihost:i}=function(e){if(!e||"string"!=typeof e)return{url:{searchParams:new Map}};let t=e;t=decodeURIComponent((t=t.slice(t.indexOf("://")+3).split(/[?/]/)[0]).slice(t.indexOf("@")+1));let r=new URL(e.replace(t,t.split(",")[0]));return{url:{username:decodeURIComponent(r.username),password:decodeURIComponent(r.password),host:r.host,hostname:r.hostname,port:r.port,pathname:r.pathname,searchParams:r.searchParams},multihost:t.indexOf(",")>-1&&t}}(e),l=[...o.searchParams].reduce((e,[t,r])=>(e[t]=r,e),{}),c=a.hostname||a.host||i||o.hostname||s.PGHOST||"localhost",u=a.port||o.port||s.PGPORT||5432,f=a.user||a.username||o.username||s.PGUSERNAME||s.PGUSER||function(){try{return n.userInfo().username}catch(e){return process.env.USERNAME||process.env.USER||process.env.LOGNAME}}();a.no_prepare&&(a.prepare=!1),l.sslmode&&(l.ssl=l.sslmode,delete l.sslmode),"timeout"in a&&(console.log("The timeout option is deprecated, use idle_timeout instead"),a.idle_timeout=a.timeout),"system"===l.sslrootcert&&(l.ssl="verify-full");let p=["idle_timeout","connect_timeout","max_lifetime","max_pipeline","backoff","keep_alive"],d={max:10,ssl:!1,idle_timeout:null,connect_timeout:30,max_lifetime:max_lifetime,max_pipeline:100,backoff:backoff,keep_alive:60,prepare:!0,debug:!1,fetch_types:!0,publications:"alltables",target_session_attrs:null};return{host:Array.isArray(c)?c:c.split(",").map(e=>e.split(":")[0]),port:Array.isArray(u)?u:c.split(",").map(e=>parseInt(e.split(":")[1]||u)),path:a.path||c.indexOf("/")>-1&&c+"/.s.PGSQL."+u,database:a.database||a.db||(o.pathname||"").slice(1)||s.PGDATABASE||f,user:f,pass:a.pass||a.password||o.password||s.PGPASSWORD||"",...Object.entries(d).reduce((e,[t,r])=>{let n=t in a?a[t]:t in l?"disable"!==l[t]&&"false"!==l[t]&&l[t]:s["PG"+t.toUpperCase()]||r;return e[t]="string"==typeof n&&p.includes(t)?+n:n,e},{}),connection:{application_name:"postgres.js",...a.connection,...Object.entries(l).reduce((e,[t,r])=>(t in d||(e[t]=r),e),{})},types:a.types||{},target_session_attrs:function(e,t,r){let n=e.target_session_attrs||t.searchParams.get("target_session_attrs")||r.PGTARGETSESSIONATTRS;if(!n||["read-write","read-only","primary","standby","prefer-standby"].includes(n))return n;throw Error("target_session_attrs "+n+" is not supported")}(a,o,s),onnotice:a.onnotice,onnotify:a.onnotify,onclose:a.onclose,onparameter:a.onparameter,socket:a.socket,transform:{undefined:(r=a.transform||{undefined:void 0}).undefined,column:{from:"function"==typeof r.column?r.column:r.column&&r.column.from,to:r.column&&r.column.to},value:{from:"function"==typeof r.value?r.value:r.value&&r.value.from,to:r.value&&r.value.to},row:{from:"function"==typeof r.row?r.row:r.row&&r.row.from,to:r.row&&r.row.to}},parameters:{},shared:{retries:0,typeArrayMap:{}},...mergeUserTypes(a.types)}}(e,t),a=r.no_subscribe||function(e,t){let r=new Map,n="postgresjs_"+Math.random().toString(36).slice(2),s={},a,o,i=!1,l=subscribe.sql=e({...t,transform:{column:{},value:{},row:{}},max:1,fetch_types:!1,idle_timeout:null,max_lifetime:null,connection:{...t.connection,replication:"database"},onclose:async function(){i||(o=null,s.pid=s.secret=void 0,connected(await init(l,n,t.publications)),r.forEach(e=>e.forEach(({onsubscribe:e})=>e())))},no_subscribe:!0}),c=l.end,u=l.close;return l.end=async()=>(i=!0,o&&await new Promise(e=>(o.once("close",e),o.end())),c()),l.close=async()=>(o&&await new Promise(e=>(o.once("close",e),o.end())),u()),subscribe;async function subscribe(e,i,c=subscribe_noop,u=subscribe_noop){e=function(e){let t=e.match(/^(\*|insert|update|delete)?:?([^.]+?\.?[^=]+)?=?(.+)?/i)||[];if(!t)throw Error("Malformed subscribe pattern: "+e);let[,r,n,s]=t;return(r||"*")+(n?":"+(-1===n.indexOf(".")?"public."+n:n):"")+(s?"="+s:"")}(e),a||(a=init(l,n,t.publications));let f={fn:i,onsubscribe:c},p=r.has(e)?r.get(e).add(f):r.set(e,new Set([f])).get(e),unsubscribe=()=>{p.delete(f),0===p.size&&r.delete(e)};return a.then(e=>(connected(e),c(),o&&o.on("error",u),{unsubscribe,state:s,sql:l}))}function connected(e){o=e.stream,s.pid=e.state.pid,s.secret=e.state.secret}async function init(e,r,n){if(!n)throw Error("Missing publication names");let s=await e.unsafe(`CREATE_REPLICATION_SLOT ${r} TEMPORARY LOGICAL pgoutput NOEXPORT_SNAPSHOT`),[a]=s,o=await e.unsafe(`START_REPLICATION SLOT ${r} LOGICAL ${a.consistent_point} (proto_version '1', publication_names '${n}')`).writable(),i={lsn:Buffer.concat(a.consistent_point.split("/").map(e=>Buffer.from(("00000000"+e).slice(-8),"hex")))};return o.on("data",function(r){119===r[0]?function(e,t,r,n,s){Object.entries({R:e=>{let n=1,a=t[e.readUInt32BE(n)]={schema:e.toString("utf8",n+=4,n=e.indexOf(0,n))||"pg_catalog",table:e.toString("utf8",n+1,n=e.indexOf(0,n+1)),columns:Array(e.readUInt16BE(n+=2)),keys:[]};n+=2;let o=0,i;for(;n<e.length;)(i=a.columns[o++]={key:e[n++],name:s.column.from?s.column.from(e.toString("utf8",n,n=e.indexOf(0,n))):e.toString("utf8",n,n=e.indexOf(0,n)),type:e.readUInt32BE(n+=1),parser:r[e.readUInt32BE(n)],atttypmod:e.readUInt32BE(n+=4)}).key&&a.keys.push(i),n+=4},Y:()=>{},O:()=>{},B:e=>{var r;t.date=(r=e.readBigInt64BE(9),new Date(Date.UTC(2e3,0,1)+Number(r/BigInt(1e3)))),t.lsn=e.subarray(1,9)},I:e=>{let r=1,a=t[e.readUInt32BE(r)],{row:o}=tuples(e,a.columns,r+=7,s);n(o,{command:"insert",relation:a})},D:e=>{let r=1,a=t[e.readUInt32BE(r)];r+=4;let o=75===e[r];n(o||79===e[r]?tuples(e,a.columns,r+=3,s).row:null,{command:"delete",relation:a,key:o})},U:e=>{let r=1,a=t[e.readUInt32BE(r)];r+=4;let o=75===e[r],i=o||79===e[r]?tuples(e,a.columns,r+=3,s):null;i&&(r=i.i);let{row:l}=tuples(e,a.columns,r+3,s);n(l,{command:"update",relation:a,key:o,old:i&&i.row})},T:()=>{},C:()=>{}}).reduce((e,[t,r])=>(e[t.charCodeAt(0)]=r,e),{})[e[0]](e)}(r.subarray(25),i,e.options.parsers,handle,t.transform):107===r[0]&&r[17]&&(i.lsn=r.subarray(1,9),function(){let e=Buffer.alloc(34);e[0]=114,e.fill(i.lsn,1),e.writeBigInt64BE(BigInt(Date.now()-Date.UTC(2e3,0,1))*BigInt(1e3),25),o.write(e)}())}),o.on("error",function(e){console.error("Unexpected error during logical streaming - reconnecting",e)}),o.on("close",e.close),{stream:o,state:s.state};function handle(e,t){let r=t.relation.schema+"."+t.relation.table;call("*",e,t),call("*:"+r,e,t),t.relation.keys.length&&call("*:"+r+"="+t.relation.keys.map(t=>e[t.name]),e,t),call(t.command,e,t),call(t.command+":"+r,e,t),t.relation.keys.length&&call(t.command+":"+r+"="+t.relation.keys.map(t=>e[t.name]),e,t)}}function call(e,t,n){r.has(e)&&r.get(e).forEach(({fn:r})=>r(t,n,e))}}(Postgres,{...r}),o=!1,i=src_queue(),u=src_queue(),f=src_queue(),p=src_queue(),d=src_queue(),m=src_queue(),h=src_queue(),g=src_queue(),y={connecting:u,reserved:f,closed:p,ended:d,open:m,busy:h,full:g},b=[...Array(r.max)].map(()=>src_connection(r,y,{onopen,onend,onclose})),w=Sql(function(e){return o?e.reject(c.connection("CONNECTION_ENDED",r,r)):m.length?go(m.shift(),e):p.length?connect(p.shift(),e):void(h.length?go(h.shift(),e):i.push(e))});return Object.assign(w,{get parameters(){return r.parameters},largeObject:largeObject.bind(null,w),subscribe:a,CLOSE:l,END:l,PostgresError:PostgresError,options:r,reserve,listen,begin,close,end}),w;function Sql(e){return e.debug=r.debug,Object.entries(r.types).reduce((e,[t,r])=>(e[t]=e=>new Parameter(e,r.to),e),typed),Object.assign(sql,{types:typed,typed,unsafe:function(t,r=[],n={}){2!=arguments.length||Array.isArray(r)||(n=r,r=[]);let s=new Query([t],r,e,cancel,{prepare:!1,...n,simple:"simple"in n?n.simple:0===r.length});return s},notify,array:function array(e,t){return Array.isArray(e)?new Parameter(e,t||(e.length?inferType(e)||25:0),r.shared.typeArrayMap):array(Array.from(arguments))},json,file:function(t,r=[],n={}){2!=arguments.length||Array.isArray(r)||(n=r,r=[]);let a=new Query([],r,r=>{s.readFile(t,"utf8",(t,n)=>{if(t)return r.reject(t);r.strings=[n],e(r)})},cancel,{...n,simple:"simple"in n?n.simple:0===r.length});return a}}),sql;function typed(e,t){return new Parameter(e,t)}function sql(t,...n){let s=t&&Array.isArray(t.raw)?new Query(t,n,e,cancel):"string"!=typeof t||n.length?new Builder(t,n):new Identifier(r.transform.column.to?r.transform.column.to(t):t);return s}}async function listen(e,t,n){let s={fn:t,onlisten:n},a=listen.sql||(listen.sql=Postgres({...r,max:1,idle_timeout:null,max_lifetime:null,fetch_types:!1,onclose(){Object.entries(listen.channels).forEach(([e,{listeners:t}])=>{delete listen.channels[e],Promise.all(t.map(t=>listen(e,t.fn,t.onlisten).catch(()=>{})))})},onnotify(e,t){e in listen.channels&&listen.channels[e].listeners.forEach(e=>e.fn(t))}})),o=listen.channels||(listen.channels={}),i=e in o;if(i){o[e].listeners.push(s);let t=await o[e].result;return s.onlisten&&s.onlisten(),{state:t.state,unlisten}}o[e]={result:a`listen ${a.unsafe('"'+e.replace(/"/g,'""')+'"')}`,listeners:[s]};let l=await o[e].result;return s.onlisten&&s.onlisten(),{state:l.state,unlisten};async function unlisten(){if(e in o!=!1&&(o[e].listeners=o[e].listeners.filter(e=>e!==s),!o[e].listeners.length))return delete o[e],a`unlisten ${a.unsafe('"'+e.replace(/"/g,'""')+'"')}`}}async function notify(e,t){return await w`select pg_notify(${e}, ${""+t})`}async function reserve(){let e=src_queue(),t=m.length?m.shift():await new Promise(e=>{i.push({reserve:e}),p.length&&connect(p.shift())});move(t,f),t.reserved=()=>e.length?t.execute(e.shift()):move(t,f),t.reserved.release=!0;let r=Sql(function(r){t.queue===g?e.push(r):t.execute(r)||move(t,g)});return r.release=()=>{t.reserved=null,onopen(t)},r}async function begin(e,t){t||(t=e,e="");let r=src_queue(),n=0,s,a=null;try{return await w.unsafe("begin "+e.replace(/[^a-z ]/ig,""),[],{onexecute:function(e){s=e,move(e,f),e.reserved=()=>r.length?e.execute(r.shift()):move(e,f)}}).execute(),await Promise.race([scope(s,t),new Promise((e,t)=>s.onclose=t)])}catch(e){throw e}async function scope(e,t,s){let o,i;let l=Sql(function(t){t.catch(e=>o||(o=e)),e.queue===g?r.push(t):e.execute(t)||move(e,g)});l.savepoint=function savepoint(t,r){return t&&Array.isArray(t.raw)?savepoint(e=>e.apply(e,arguments)):(1==arguments.length&&(r=t,t=null),scope(e,r,"s"+n+++(t?"_"+t:"")))},l.prepare=e=>a=e.replace(/[^a-z0-9$-_. ]/gi),s&&await l`savepoint ${l(s)}`;try{if(i=await new Promise((e,r)=>{let n=t(l);Promise.resolve(Array.isArray(n)?Promise.all(n):n).then(e,r)}),o)throw o}catch(e){throw await (s?l`rollback to ${l(s)}`:l`rollback`),e instanceof PostgresError&&"25P02"===e.code&&o||e}return s||(a?await l`prepare transaction '${l.unsafe(a)}'`:await l`commit`),i}}function move(e,t){return e.queue.remove(e),t.push(e),e.queue=t,t===m?e.idleTimer.start():e.idleTimer.cancel(),e}function json(e){return new Parameter(e,3802)}function go(e,t){return e.execute(t)?move(e,h):move(e,g)}function cancel(e){return new Promise((t,n)=>{e.state?e.active?src_connection(r).cancel(e.state,t,n):e.cancelled={resolve:t,reject:n}:(i.remove(e),e.cancelled=!0,e.reject(c.generic("57014","canceling statement due to user request")),t())})}async function end({timeout:e=null}={}){let t;return o||(await 1,o=Promise.race([new Promise(r=>null!==e&&(t=setTimeout(destroy,1e3*e,r))),Promise.all(b.map(e=>e.end()).concat(listen.sql?listen.sql.end({timeout:0}):[],a.sql?a.sql.end({timeout:0}):[]))]).then(()=>clearTimeout(t)))}async function close(){await Promise.all(b.map(e=>e.end()))}async function destroy(e){for(await Promise.all(b.map(e=>e.terminate()));i.length;)i.shift().reject(c.connection("CONNECTION_DESTROYED",r));e()}function connect(e,t){return move(e,u),e.connect(t),e}function onend(e){move(e,d)}function onopen(e){if(0===i.length)return move(e,m);let t=Math.ceil(i.length/(u.length+1)),r=!0;for(;r&&i.length&&t-- >0;){let t=i.shift();if(t.reserve)return t.reserve(e);r=e.execute(t)}r?move(e,h):move(e,g)}function onclose(e,t){move(e,p),e.reserved=null,e.onclose&&(e.onclose(t),e.onclose=null),r.onclose&&r.onclose(e.id),i.length&&connect(e,i.shift())}}function backoff(e){return(.5+Math.random()/2)*Math.min(3**e/100,20)}function max_lifetime(){return 60*(30+30*Math.random())}}};